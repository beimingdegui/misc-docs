== 集群、仓库级计算机（WSC）

高性能计算（HPC）集群与仓库级计算机（WSC）应用领域不同。前者更倾向于线程级并行，主要解决复杂问题。而后者强调请求级并行，同时为多个用户进行服务。

仓库级计算机（WSC）是几十亿人每日所用互联网服务的基础，这些服务包括：搜索、社交网络、在线地图、视频共享、网上购物、电子邮件服务，等等。此类互联网服务深受大众喜爱，从而有了创建WSC的必要，以满足公众迅速增长的需求。尽管WSC可能看起来只是一些大型数据中心，但它们的体系结构和运行有很大的不同，这一点稍后我们就会看到。今天的WSC像是一个巨型机器，其成本高达数亿美元，包括机房、配电与制冷基础设施、服务器和网络设备，其中网络设备连接并容纳了50000至100000台服务器。此外，商业云计算的快速增长让每一个拥有信用卡的人都能使用WSC。

计算机体系结构很自然地扩展到WSC的设计中。例如，Google公司Luiz Barroso的论文研究的就是计算机体系结构。他认为，架构师在设计过程中实现可扩展性、提高可信性的技巧以及调试硬件的技巧，对于创建和运行WSC有很大的帮助。

WSC的巨大规模需要在配电、制冷、监控和运行等各个方面做出创新。WSC是超级计算机的现代后裔，这一点也让Seymour Cray成为当今WSC架构师的教父。他的极限计算机可以处理一些在其他任何地方都无法完成的计算，但非常昂贵，只有少数几家公司负担得起。而WSC的目标是为整个世界提供信息技术，而不再是为科学家和工程师提供高性能计算（HPC）。因此，相较于Cray的超级计算机在过去发挥的作用，WSC在当今社会中扮演了更为重要的角色。

毫无疑问，WSC的用户要比高性能计算的用户多出好几个量级，它在IT市场占有的份额也要大得多。无论是按用户数量计算还是按收入计算，Google公司都比Cray Research 公司大1000倍。

WSC架构师的许多目标和需求与服务器架构师一致。

- 性价比——每一美元能够完成的工作量至关重要，部分原因就是WSC的规模太大了。将一组WSC的成本降低几个百分点就可以节省数百万美元。

- 能效——除了逃逸出去的光子，WSC本质上是封闭的系统，几乎所有能耗都转化为必须被移除的热量。因此，峰值功耗和实际功耗推高了配电与制冷系统两项成本。建造WSC的大部分基础设施成本都花在了电力和制冷上。另外，能效也是环境管理的一个重要组成部分。因此，每焦耳完成的工作量对于wSC和它的服务器来说都至关重要，因为为仓库级计算机建造电力与机械基础设施的成本很高，每月因此产生的水电费也很高。

- 通过冗余提高可信性——互联网服务长时间运行的本质，意味着WSC中的硬件和软件必须至少共同提供99.99%的可用性；也就是说，它每年的宕机时间必须低于1小时。对于WSC和服务器来说，冗余都是提高可信性的关键。服务器架构师经常利用数量更多且价格更高的硬件来实现高可用性，而WSC架构师则利用由网络连接的大量高性价比的服务器，并依赖软件来管理系统的冗余。除了WSC内部的本地冗余之外，一个组织还需要冗余的WSC来应对可能会摧毁整个WSC的事件。事实上，尽管每一个云服务都需要在至少99.99%的时间内可用，但像Amazon、Google或Microsoft这样的纯互联网公司对可信性的要求更高。如果其中一家公司每年有1小时完全离线——也就是99.99%的可用性——那就会成为头版新闻。多个WSC还有利于减少跨地域广泛部署的服务的延迟。

- 网络I/O——服务器架构师必须提供一个出色的网络接口来连接外部世界，WSC架构也必须如此。为保持多个WSC之间的数据一致性，以及与公众交互，需要进行联网。

- 交互式与批处理工作负载——尽管人们期望搜索和社交网络等拥有数十亿用户的服务具有高度交互的工作负载，但WSC像服务器一样，也运行着大量并行批处理程序，用以计算对此类服务有用的元数据。例如，它们可以执行MapReduce作业，将通过爬网返回的页面转换为搜索索引。

当然，WSC也有一些不同于服务器体系结构的特性。

- 足够的并行度——服务器架构师关注的一个问题是，目标市场中的应用程序是否有足够的并行度以充分发挥大量并行硬件的功用，以及为了挖掘这些并行性所使用的通信硬件的成本是否过高。WSC架构师则不关注此类问题。首先，批处理应用程序获益于大量需要独立处理的独立数据集，比如爬取的数十亿个网页。这一处理过程就是数据级并行，这里的数据指的是存储（storage）中的数据，而不是内存（memory）中的数据。第二，交互式互联网服务应用程序（也称为软件即服务，Saas）可从交互式互联网服务数以百万计的独立用户中获益。在SaaS中，读与写很少是相关的，所以SaaS很少需要同步。例如，搜索服务使用的是只读索引，而电子邮件通常需要读写独立的信息。因为许多独立的工作可以很自然地并行进行，几乎不需要通信或同步，所以我们将这种简单的并行称为请求级并行；例如，基于日志的更新过程可以降低吞吐量需求。有时需要放弃存储器中一些与读写数据相关的特性，以提供可扩展到现代WSC大小的存储。无论如何，WSC应用程序别无选择，只能找到能够跨越数百到数千台服务器的算法，因为这是客户所期望的，也是WSC技术所提供的。

- 运营成本计算——服务器架构师通常会忽略服务器的运营成本，假定其相对于购买成本是微不足道的。WSC的寿命更长——机房以及配电和制冷基础设施经常要使用10-15年，所以运营成本也不可小视：在10年中，能源、配电和制冷方面的费用占WSC成本的30%以上。

- 位置成本——要建立WSC，第一步是建立机房。一个问题是在哪儿建机房？房地产经纪人强调位置，但搭建WSC的位置要满足如下要求：有水和便宜的电力，靠近互联网主干光纤，附近的人能够到WsC工作，发生地震、洪水和飓风等环境灾害的风险很低。一个更加显而易见的问题是土地成本，包括WsC扩容所需的足够空间。对于有许多 WSC的公司来说，关注的另一个问题是找到一个靠近当前或未来互联网用户群的地方，以减少互联网延迟。其他因素包括税费、物业费、社会问题（有时人们希望在自己的国家或地区建立设施）、网络成本、网络的可靠性、电力成本、电力来源（例如水电和煤炭）、天气（制冷设备更便宜）、整体互联网连接（澳大利亚在地理位置上接近新加坡，但它们之间的网络链路带宽并不大）。

- 在低利用率下进行高效计算——服务器架构师设计系统的宗旨是在成本预算范围内达到峰值性能，他们仅仅在系统可能超过其机箱的冷却能力时才需要担心功耗问题。WSC服务器很少得到充分利用，部分原因是为了确保低响应时间，部分原因是为了提供进行可靠计算所需的冗余。考虑到运营成本，这些服务器需要在所有利用率级别上高效地计算。

- 规模以及与规模相关的机会/问题——通常，极限计算机是极其昂贵的，因为它们需要定制硬件，而且因为极限计算机的制造数目很低，所以无法有效地分摊定制成本。不过，如果我们一次购买数千台服务器，则可以获得很低的折扣。由于WSC本身就非常庞大，所以即使没有太多WSC.也可以实现规模经济效应。这些规模经济导致了商业云计算的出现，这是因为WSC的单位成本更低，也就是说，一些公司可以向外租借服务器，其利润低于租借者自行租用的成本。100000台服务器的不利之处就是容易发生故障。即使一台服务器的平均无故障时间（MTTF）达到了令人惊叹的25年（200000小时），WSC架构师在进行设计时也要考虑每天有5台服务器发生故障的情况。年磁盘故障率为2%-10%。如果每台服务器有2块硬盘，它们的年故障率为4%，那么对于拥有100000台服务器的WSC时，预计架构师每小时就会看到一块磁盘发生故障。然而，软件故障远远超过硬件故障，因此系统设计必须具有弹性，能够应对由软件故障导致的服务器崩溃，而服务器崩溃比磁盘故障发生得更频繁。由于在这些非常大的设施中有数千台服务器，WSC操作员非常擅长更换磁盘，因此WSC的磁盘故障成本要比小型数据中心低得多。这同样适用于DRAM。如果有更便宜的组件，WSC可以使用可靠性更差的组件。

WSC的先驱是计算机集群(computer cluster)。集群是一组使用局城网（LAN）和交换机连接在一起的独立计算机。对于不需要密集通信的工作负载，集群计算的成本效益要远高于共享存储器多处理器。（共享存储器多处理器是多核计算机的先驱。）集群在20世纪90年代后期开始流行，先用于科学计算，后来用于互联网服务。关于 WSC 有这样一个观点：它们就是过去数百台服务器组成的集胖向今天数万台服务器所组成的集群的逻辑演化。

一个很自然的问题是：WSC是否与高性能计算（HPC）使用的现代集群类似?尽管一些WSC的规模和成本与HPC相近（有些HPC设计拥有100万台处理器，花费数亿美元），但HPC在历史上拥有比WSC更强大的处理器和更低的节点间网络延迟，因为HPC应用的依赖性更强，通信更频繁。其编程环境还强调线程级并行或数据级并行，通常强调完成单项任务的延迟，而不是通过请求级并行完成许多独立任务的带宽。HPC集群往往还拥有长时间运行的作业，它们会使服务器满负荷运行，甚至能持续数周以上，而WSC中服务器的利用率通常在10%~50%，而且每天都会发生变化。与超级计算机环境不同，每周都有数千名开发人员在WSC代码库上工作，并部署重要的软件版本。

WSC与传统数据中心相比又怎么样呢?传统数据中心的运营人员通常从组织的许多部门收集机器和第三方软件，并集中为他人运行这些机器和软件。他们的关注点通常是将许多服务整合到较少的机器中，并且这些机器相互隔离，以保护敏感信息。因此，虚拟机在数据中心的重要性日益增加。虚拟机对WSC来说也很重要，但扮演的角色不同。它们用于在不同的客户之间提供隔离，并将硬件资源分割成不同大小的共享部分，以便以不同的价格出租。与WSC不同，传统数据中心往往拥有各种不同的硬件和软件，为一个组织中的不同客户提供服务。WSC程序员则定制第三方软件或者自行开发软件，WSC的硬件一致性要强得多；WSC的目标是让仓库中的硬件/软件就像一台计算机一样，只是上面运行着各种不同的应用程序。传统数据中心的最大成本通常是维护人员的费用，在设计完善的WSC中，服务器硬件是最大的成本，人力成本从最大成本变为几乎可以忽略。传统数据中心也不具备WSC的规模，所以它们无法获得前述的规模经济效益。

因此，尽管WSC可能被认为是一个极端的数据中心（因为这些计算机被单独放置在具有特殊配电和制冷基础设施的空间内），但典型的数据中心通常没有WSC所面对的挑战和机遇，无论是体系结构方面还是运营方面都是如此。

=== 仓库级计算机的编程模型与工作负载

**编程模型**

仓库级计算机的编程模型是为处理大规模分布式系统和云计算环境中的任务而设计的。它的核心在于高效地利用由数千甚至数百万台计算节点组成的集群，这些节点通常分布在多个机架中，并通过高速网络互联。编程模型需要在高吞吐量、容错性、分布式数据处理和并行计算之间找到平衡，从而最大化资源利用率，同时满足应用的性能和可靠性需求。

仓库级计算机的编程模型通常采用分布式计算框架和抽象层，帮助开发者隐藏复杂的底层硬件细节。典型的编程模型包括MapReduce、Spark、Hadoop等，它们强调将任务分解为小块并行处理，通过分布式文件系统（如HDFS）进行数据存储和管理。程序的编写者只需专注于任务逻辑，而框架会负责调度、资源分配和故障恢复。

在这样的模型中，数据分布和任务划分是关键。程序需要设计成能够以并行方式处理大规模的数据集，因此任务通常会划分为多个独立的操作单元（如Map和Reduce阶段）。这些单元在多个节点上同时执行，从而加速计算过程。为了进一步优化性能，编程模型会尽量将计算移动到数据所在的节点，以减少数据传输的开销。

容错性是仓库级计算机编程模型的一个重要特性，因为硬件故障在如此大规模的系统中是不可避免的。框架通过数据冗余和任务重试机制来确保任务可以在某个节点失败的情况下继续进行。例如，当一个节点失效时，框架会自动将任务转移到另一个节点，避免整个计算过程中断。

此外，仓库级计算机的编程模型还支持高度灵活的调度和资源管理。例如，资源可以根据应用需求动态分配，开发者可以通过设置优先级和资源限制来控制任务的执行。负载均衡机制可以防止某些节点过载，同时提高整体系统的吞吐量。

编程模型还强调对多种数据格式和存储方式的支持，例如关系型数据库、键值存储、文档数据库等。为了满足多样化的计算需求，仓库级计算机编程模型通常支持多种语言接口（如Java、Python、Scala），并提供丰富的库和工具以加速开发。

**主要工作负载及应对方法**

仓库级计算机（Warehouse-Scale Computers, WSC）的主要工作负载包括搜索引擎、社交媒体、电子商务、大数据分析、机器学习训练和推理、视频流媒体服务等。由于这些工作负载通常涉及到海量数据、高并发请求和复杂计算，仓库级计算机需要通过精心设计的架构和优化技术来高效地应对这些挑战，以满足性能、可靠性和成本的需求。

首先，仓库级计算机的核心工作负载之一是搜索引擎服务。搜索引擎需要实时响应用户查询，处理大量的文档索引、排序和检索工作。为了满足这种需求，WSC将搜索索引分布在多个节点上，每个节点处理部分文档集合。这种分布式设计使得查询可以并行处理，显著提高了响应速度。同时，搜索结果排序通常需要复杂的算法计算，WSC通过优化硬件性能和缓存机制，减少了计算延迟。

社交媒体平台的工作负载包括用户内容生成、消息传递、实时推荐和大规模图计算。这些负载需要高并发的处理能力和快速的数据一致性保证。WSC通过分布式存储系统和分片技术，将数据分散在多个节点上，以提高吞吐量和降低延迟。同时，社交媒体中的推荐系统依赖实时用户数据分析，WSC通常采用流式计算框架（如Apache Kafka、Flink）来支持低延迟的实时数据处理。

电子商务平台的工作负载涉及库存管理、交易处理、支付系统以及推荐引擎。为了处理高峰流量和瞬时的大量交易请求，WSC利用负载均衡技术，将请求均匀分配到不同服务器上。此外，电子商务平台需要极高的数据一致性和事务可靠性，因此WSC常采用分布式事务处理协议（如两阶段提交）以及高可用的数据库系统来确保交易数据的正确性。

大数据分析和机器学习任务是WSC的另一类重要工作负载。这些任务需要处理海量数据，包括数据预处理、特征提取、模型训练和评估等。WSC通常采用分布式计算框架（如Hadoop、Spark）来划分和并行化计算任务，以充分利用集群资源。对于机器学习模型训练，WSC通过专用硬件（如GPU、TPU）和高效的分布式训练算法（如数据并行、模型并行）来加速计算过程，同时利用参数服务器等架构实现多节点之间的通信和同步。

视频流媒体服务的工作负载主要是视频的存储、转码和传输。为了高效处理海量的视频请求，WSC通常采用内容分发网络（CDN）将热门视频内容缓存在离用户更近的边缘节点，从而降低主数据中心的负载和传输延迟。此外，视频转码是一项计算密集型任务，WSC利用专用硬件加速器和并行计算技术来提升转码效率。

为应对这些工作负载，仓库级计算机需要结合多种优化方法。一方面，在硬件层面，WSC通过使用高性能处理器（包括CPU、GPU和加速器）、大容量内存和高速网络互联来提升性能。另一方面，在软件层面，WSC采用高效的分布式存储系统（如HDFS、Bigtable）和计算框架（如MapReduce、Spark）来优化数据处理。此外，为了实现高可用性和容错性，WSC依赖于数据冗余、任务重试和负载均衡等机制，确保即使在硬件故障或高峰流量下系统也能稳定运行。

=== 仓库级计算机的计算机体系结构

WSC的网络是将50000-100000台服务器连接在一起的结缔组织。类似于存储器层次结构，WSC使用一种层次化的网络结。理想情况下，这种合并后的网络将提供相当于为100000台服务器定制的高端交换机的性能，而每端口的成本只相当于为50台服务器设计的普通交换机。

承载服务器的结构是机架。虽然每个WSC的机架宽度不同（有些是经典的19英寸宽，其他的是这个宽度的两到三倍），但高度往往都不超过6-7英尺，以方便工作人员进行维修和保养。这样的机架大概可容纳40-80台服务器。由于在机架顶部连接网络电缆通常很方便，这种交换机通常称为机架（ToR）交换机。(有些WSC有带多个ToR交换机的机架。）通常，机架内的带宽比机架之间的带宽高得多，所以如果发送机和接收机在同一个机架内，软件将发送机和接收机放在哪里就不那么重要了。从软件的角度来看，这种灵活性是很理想的。

这些交换机通常提供4-16个上行链路，它们用来连接位于网络层次结构中的下一层交换机。因此，机架之间的带宽是机架内带宽的stem:[1/6～1/24(8/48～2/48)]。这—比值称为收敛比（orersubscripion)。然而，当收敛比很高时，程序员必须知道将发送机和接收机放在不同机架时将导致的性能后果。这会增大软件调度负担，也是专门为数据中心设计网络交换机的另一个理由。

连接机架阵列的交换机比ToR交换机贵得多。产生这种成本的一个原因是更高的连通性，另一个原因是通过交换机的带宽必须更大，以减少收敛比问题。Barroso等人[2013]报告说，如果一个交换机的二分带宽（bisection bandwidth，基本上是最坏情况下的内部带宽）是机架式交换机的10倍，那么其成本大约是ToR交换机的100倍。其中一个原因是n端口交换机的带宽成本会增长倍。

==== 存储

WSC的存储体系以分布式存储系统为核心，这种架构通过将数据分散存储在多个物理服务器上，提供了良好的扩展性和容错能力。在分布式存储中，数据通常以分片（shard）的形式存储，每个分片会被复制到多个节点上以实现数据冗余，从而提高系统的可靠性。即使某些存储节点发生故障，系统也可以通过访问冗余副本来保证数据的可用性。分布式文件系统（如HDFS）和分布式数据库（如Google Spanner、Bigtable）是实现这一目标的典型例子。HDFS提供了对海量非结构化数据的存储支持，而Bigtable则擅长处理结构化数据，同时支持高吞吐量的随机读写操作。

其次，存储体系中的层次化存储设计也是WSC的关键特征。为了高效管理不同类型的数据和优化访问性能，WSC通常结合使用多种存储介质。快速但昂贵的存储介质（如DRAM和NVMe SSD）主要用于缓存和热数据存储，提供低延迟的数据访问；而廉价且容量大的存储介质（如HDD和磁带）则用于存储冷数据和归档数据。通过这种层次化设计，WSC在性能和成本之间实现了良好的平衡。例如，分布式缓存系统（如Memcached或Redis）利用DRAM缓存频繁访问的数据，降低了后端存储系统的压力，而冷数据可以被异步迁移到HDD或离线存储设备中。

数据一致性是WSC存储体系中必须解决的关键问题。由于数据分布在多个节点之间，分布式存储系统需要通过一致性协议（如Paxos或Raft）来确保数据副本的一致性。对于强一致性需求的应用（如金融交易系统），系统会采用同步复制机制，在写操作完成后立即更新所有副本。而对于某些可以容忍弱一致性的场景（如社交媒体新闻流），系统可能选择异步复制以减少延迟。此外，存储系统还支持事务性操作，提供原子性和隔离性，以确保复杂操作的正确性。

数据分布和访问模式优化是存储体系设计中的另一个重要方面。WSC需要通过智能的数据分布策略和索引机制来高效管理大规模数据。常见的做法是根据数据的访问频率、地理位置或内容特征来分布数据。例如，为了减少用户访问延迟，热门数据通常被复制到距离用户最近的节点或区域。同时，分布式哈希表（DHT）等索引技术被用来快速定位数据，提高查询效率。

为了满足现代应用对存储性能的高要求，WSC还依赖于硬件层面的优化。在许多情况下，WSC会配备高性能的网络存储设备（如NVMe SSD）和高速网络互联（如RDMA或NVLink）来加速数据传输。此外，一些先进的WSC甚至会使用专用的硬件加速器（如FPGA或ASIC）来优化特定存储操作（如压缩、解压缩和加密）。

最后，存储系统的可管理性和可扩展性也是WSC设计的重要目标。WSC通常采用分布式元数据管理来协调存储节点的操作，并通过自动化的负载均衡和故障恢复机制来减少人工干预。随着存储需求的增长，WSC可以通过简单地增加存储节点或升级硬件来扩展系统容量，而不需要对现有系统进行大规模的重构。

==== WSC存储器层次结构

在存储器层次结构的顶层，WSC通常利用高速缓存来加速对频繁访问数据的处理。这一层次的高速缓存包括处理器内置的L1、L2和L3缓存以及分布式缓存系统（如Memcached或Redis）。处理器内的高速缓存负责加速计算节点的本地数据访问，而分布式缓存则通过内存级存储实现整个集群范围内的数据共享。分布式缓存系统通常使用DRAM作为存储介质，具备极低的访问延迟，适用于存储热点数据或中间计算结果，从而减少对后端存储系统的压力。对于WSC的许多在线服务应用（如搜索引擎和社交媒体），分布式缓存系统起到了至关重要的作用。

在高速缓存之下，主存储器（DRAM）是存储层次结构的重要组成部分。主存储器为计算节点提供了较大的存储容量，用于支持运行中的应用程序和处理任务所需的数据。然而，DRAM的成本较高且功耗较大，因此其容量通常受限于实际预算。为优化主存储器的使用效率，WSC会采用内存分片和内存分级管理策略，将不同节点的内存资源虚拟化为一个统一的内存池，从而实现跨节点的高效资源共享。此外，近年来随着非易失性存储器（如3D XPoint）的兴起，一些WSC开始将非易失性存储器作为主存储器的一部分或其扩展，用以在降低成本的同时提高存储密度。

主存储器之下是分布式存储系统，这是WSC存储层次结构的核心部分。这一层次的存储系统通过分布式文件系统（如HDFS）或分布式数据库（如Google Spanner和Bigtable）实现海量数据的可靠存储和高效管理。分布式存储系统通常将数据分片，并将每个分片的多个副本存储在不同的物理节点上，从而提供高可靠性和容错能力。分布式存储系统支持的数据类型广泛，包括非结构化数据（如日志文件和多媒体内容）和结构化数据（如事务记录）。此外，分布式存储系统还支持动态负载均衡、分布式事务和一致性协议（如Paxos或Raft），以保证数据的可用性和一致性。

存储层次结构的底层是离线存储设备，用于存储冷数据和归档数据。这些设备包括大容量的HDD和磁带库，其特点是成本低但访问延迟较高。离线存储主要用于存储不经常访问的数据，例如历史日志、备份数据和归档文件。当需要访问冷数据时，系统可以将其从离线存储设备迁移到上层存储设备中，以支持进一步的处理或分析。通过这种分层存储策略，WSC能够在性能和成本之间取得平衡，同时确保满足不同数据访问模式的需求。

WSC存储器层次结构的设计还充分考虑了数据在不同层次之间的流动性。为了提高数据访问效率，WSC通常会采用多种数据迁移和缓存策略。例如，系统会将热点数据从底层存储设备预取到上层的高速缓存或主存储器中，以减少高延迟设备的访问频率。此外，分层存储还通过数据压缩、去重和智能分配技术优化了存储资源的利用率，从而进一步降低存储成本。

=== 云计算：效用计算的回报

由于用户数目不断增大，受用户需求的推动，Amazon、Google和Microsoft等互联网公司用商用组件构建了日益庞大的仓库级计算机，这使得麦卡锡的预测最终成为现实，但由于分时服务的流行，这一预测并非如他所想象的那样。这种需求导致了系统软件的革新，以支持这种规模的操作，这些系统软件包括BigTable、Colossus、Dynamo、GFS和MapReduce。尽管存在组件故障和安全攻击，它还要求改进运行技术，使所提供的服务至少在99.99%的时间内可用。这些技术的示例包括故障转移、防火墙、虚拟机和防御分布式拒绝服务攻击。有了提供扩展能力的软件和专业知识，再加上日益增长的客户需求证明了投资的合理性，拥有50000到100000台服务器的WSC变得很常见。

随着规模的增大，规模经济的好处也日益凸显。2006年的一项研究对比了WSC和仅有1000台服务器的数据中心，根据这一研究，Hamilton[2010]报告了WSC的以下优势。

- 存储成本缩减为数据中心的17.7%——WSC的磁盘存储费用为每年4.6美元/GB，而数据中心则为26美元/GB。

- 管理成本缩减为数据中心的14.0%——WSC的服务器与管理员之比超过1000，而数据中心仅为140。

- 联网成本缩减为数据中心的13.7%——WSC的互联网带宽成本为每月l3美元/Mbps，而数据中心为95美元。不难想到，在协商带宽价格时，订购1000Mbps的单位Mbps价格肯定可以远低于订购10Mbps的价格。

规模经济也体现在采购过程中。大规模的采购可以使WSC中几乎所有东西获得很低的折扣价格。

规模经济同样适用于运营成本。许多数据中心的PUE为2.0，大型公司可以雇用机械工程师和电力工程师对WSC进行改进，使其PUE更低，降至1.1到1.2。

为了可靠性和降低延迟（特别是对于国际市场），互联网服务需要分布到多个WSC上。由于这一原因，所有大型公司都采用多个WSC。各个公司在世界各地创建多个小型数据中心的成本要远高于在公司总部创建单个数据中心。

最后，数据中心中服务器的利用时间往往只有总时间的10%-20%。将WSC推向公众使用之后，不同客户之间的不相关峰值可以将平均利用率提高到50%以上。

因此，WSC中的几种组件可以使WSC的规模经济提升5~7倍，而wSC整体又可以使其规模经济额外提升1.5-2倍。

<<<